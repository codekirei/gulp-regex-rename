// test/regex.js
////////////////////////////////////////////////////////////
// NPM Modules
////////////////////////////////////////////////////////////
var assert = require('chai').assert
var File   = require('gulp-util').File
var path   = require('path')

////////////////////////////////////////////////////////////
// Local Modules
////////////////////////////////////////////////////////////
var rename = require('../')

////////////////////////////////////////////////////////////
// Setup
////////////////////////////////////////////////////////////
var filePath    = path.join(process.cwd(), 'js', 'index.es6.js')
var fileBase    = path.join(process.cwd(), 'js')
var regex       = /\.es6\.js$/
var replacement = '.js'
var expected    = 'index.js'

////////////////////////////////////////////////////////////
// Logic
////////////////////////////////////////////////////////////
describe('regex', function() {
  it('should match and replace regex literal', function(done) {
    var stream = rename(regex, replacement)
    stream.on('data', function(file) {
      assert.equal(file.relative, expected)
      done()
    })
    stream.write(new File({
      path: filePath,
      base: fileBase
    }))
  })
})
